{"mappings":"oeACA,IAAAA,EAAAC,EAAA,S,kDAOA,MAAMC,EAASC,SAASC,cAAc,mBAEhCC,EAAc,IAAI,EAAAL,EAAAM,aAElBC,EAAkBF,EAAYG,mBAC9BC,EAAkBJ,EAAYG,mBAI9BE,EAAaP,SAASC,cAAc,YACpCO,EAAWR,SAASC,cAAc,UAClCQ,EAAWT,SAASC,cAAc,UAClCS,EAAYV,SAASC,cAAc,cA4BzC,SAASU,IACPP,EAAgBQ,MAAKC,IAEnBC,EADcD,EAAOE,KAAKC,QACP,cAUvB,SAASF,EAAYG,EAAOC,GAC1BC,QAAQC,IAAIH,GACVlB,EAAOsB,UAAY,GACnB,MAAMC,EAAcL,EACfM,KAAIC,GACkE,OAA/DC,KAAKC,MAAMC,aAAaC,QAAQ,SAASV,OACzCnB,EAAOsB,UAAY,QACnBX,EAAUmB,MAAMC,QAAU,UAGrBL,KAAKC,MAAMC,aAAaC,QAAQ,SAASV,MAAkBa,SAASP,EAAKQ,KAC9EtB,EAAUmB,MAAMC,QAAU,OACnB,oDAC0BN,EAAKQ,yFAC4BR,EAAKS,oBAAoBT,EAAKU,sBAAsBV,EAAKQ,oDAC9FR,EAAKW,gFAE5BX,EAAKY,UAAUb,KAAIc,GAEZ,IADPA,GAAO,EAAAC,EAAAC,gBAAeF,kEAGab,EAAKgB,aAAaC,MACrD,EACA,6DAE2BjB,EAAKkB,iFAfrC,IAoBZC,KAAK,IACR5C,EAAO6C,mBAAmB,YAAatB,GACvC,MAAMuB,EAAc7C,SAAS8C,iBAAiB,eAExCC,EAAaC,IACjB,MAAMC,EAAajD,SAASC,cAAc,qBAEpCiD,EAAalD,SAASC,cAAc,aACpCkD,EAAcnD,SAASC,cAAc,cAE3CiD,EAAWE,UAAUC,IAAI,WACzBF,EAAYC,UAAUC,IAAI,WAE1BJ,EAAWK,iBAAiB,QAASC,EAAAC,cACrCN,EAAWI,iBAAiB,QAASC,EAAAE,iBAErC,MACMC,GADc,IAAI,EAAA7D,EAAAM,cACWE,mBAE7BsD,EAAcC,OAAOZ,EAAMa,cAAc7B,IAE/C0B,EAAe9C,MAAKG,IAClBI,QAAQC,IAAIL,GACZ,MAAM+C,EAAW/C,EAAKA,KAAKC,SAC3B,EAAAuC,EAAAQ,qBAAoBD,EAAUH,OAIlCd,EAAYmB,SAAQxC,GAAQA,EAAK8B,iBAAiB,QAASP,KAjG7DxC,EAAW0D,UAAW,EACtBtD,IAEAJ,EAAW+C,iBAAiB,SAASY,IACnC/C,QAAQC,IAAI,OACZZ,EAASyD,UAAW,EACpB1D,EAAW0D,UAAW,EACtBzD,EAAS4C,UAAUC,IAAI,UACvB9C,EAAW6C,UAAUe,OAAO,UAC5BxD,OAEFH,EAAS8C,iBAAiB,SAASY,IACjC3D,EAAW0D,UAAW,EACtBzD,EAASyD,UAAW,EACpB1D,EAAW6C,UAAUC,IAAI,UACzB7C,EAAS4C,UAAUe,OAAO,UAkB1B7D,EAAgBM,MAAKC,IAEnBC,EADcD,EAAOE,KAAKC,QACP,eAjBvBP,EAAS6C,iBAAiB,SAASc,IACjCzC,aAAa0C,WAAW,iBACxB1C,aAAa0C,WAAW,eAExBtE,EAAOsB,UAAY,GACnBX,EAAUmB,MAAMC,QAAU","sources":["src/js/header-lib.js"],"sourcesContent":["// FOR LIBRARY\nimport { TheMovieApi } from './themovie-api';\nimport { getNumberFilms } from \"./gallery\";\nimport { searchFilmsFunction } from \"./modal-home\";\nimport { onCloseModal } from \"./modal-home\";\nimport { onClickBackdrop } from \"./modal-home\";\n\n\nconst listEl = document.querySelector('.film__list-lib');\n\nconst theMovieApi = new TheMovieApi();\n\nconst filmsPromiseElw = theMovieApi.fetchTrendsFilms();\nconst filmsPromiseElq = theMovieApi.fetchTrendsFilms();\n\n\n\nconst btnWatched = document.querySelector('#watched');\nconst btnQueue = document.querySelector('#queue');\nconst btnClear = document.querySelector('#clear');\nconst emptyTurn = document.querySelector('.empty__bg');\n\nbtnWatched.disabled = true;\nshowWatched();\n\nbtnWatched.addEventListener('click', ev => {\n  console.log('hhh');\n  btnQueue.disabled = false;\n  btnWatched.disabled = true;\n  btnQueue.classList.add('active');\n  btnWatched.classList.remove('active');\n  showWatched();\n});\nbtnQueue.addEventListener('click', ev => {\n  btnWatched.disabled = false;\n  btnQueue.disabled = true;\n  btnWatched.classList.add('active');\n  btnQueue.classList.remove('active');\n  showQueue();\n});\nbtnClear.addEventListener('click', e => {\n  localStorage.removeItem('local-watched');\n  localStorage.removeItem('local-queue');\n\n  listEl.innerHTML = '';\n  emptyTurn.style.display = 'block';\n});\n\nfunction showWatched() {\n  filmsPromiseElw.then(result => {\n    const films = result.data.results;\n    trendsFilms(films, 'watched');\n  });\n}\nfunction showQueue() {\n  filmsPromiseElq.then(result => {\n    const films = result.data.results;\n    trendsFilms(films, 'queue');\n  });\n}\n\nfunction trendsFilms(films, typeOfstorage) {\n  console.log(films);\n    listEl.innerHTML = '';\n    const markupItems = films\n        .map(film => {\n            if (JSON.parse(localStorage.getItem(`local-${typeOfstorage}`)) === null) {\n                listEl.innerHTML = '';\n                emptyTurn.style.display = 'block'\n                return;\n            }\n            else if (JSON.parse(localStorage.getItem(`local-${typeOfstorage}`)).includes(film.id)) {\n                emptyTurn.style.display = 'none'\n                return `\n                    <li class=\"film__item\" id=\"${film.id}\">\n                    <img class=\"film__img\" src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\" alt=${film.original_title} id=\"${film.id}\">\n                    <h3 class=\"film__name\">${film.title}</h3>\n                    <p class=\"film__genre\">\n                    ${film.genre_ids.map(item => {\n                      item = getNumberFilms(item);\n                      return ` ${item}`;\n                    })}\n                    <span class=\"film__date-release\">| ${film.release_date.slice(\n                      0,\n                      4\n                    )}</span>\n                    <span class=\"film__rating\">${film.vote_average}</span>\n                    </p>\n                    </li>`;\n      }\n    })\n    .join('');\n  listEl.insertAdjacentHTML('beforeend', markupItems);\n  const filmsChecks = document.querySelectorAll('.film__item')\n\n  const onClickLib = event => {\n    const closeBtnEl = document.querySelector('.modal-close-icon');\n\n    const backdropEl = document.querySelector('.backdrop');\n    const modalHomeEl = document.querySelector('.modal-box');\n    \n    backdropEl.classList.add('is-open');\n    modalHomeEl.classList.add('is-open');\n\n    closeBtnEl.addEventListener('click', onCloseModal);\n    backdropEl.addEventListener('click', onClickBackdrop);\n\n    const theMovieApi = new TheMovieApi();\n    const filmsPromiseEl = theMovieApi.fetchTrendsFilms();\n\n    const checkedItem = Number(event.currentTarget.id);\n\n    filmsPromiseEl.then(data => {\n      console.log(data);\n      const allFilms = data.data.results;\n      searchFilmsFunction(allFilms, checkedItem)\n    })\n  }\n\n  filmsChecks.forEach(film => film.addEventListener('click', onClickLib))\n}\n"],"names":["$gYdnx","parcelRequire","$467f7dffeb5828fb$var$listEl","document","querySelector","$467f7dffeb5828fb$var$theMovieApi","TheMovieApi","$467f7dffeb5828fb$var$filmsPromiseElw","fetchTrendsFilms","$467f7dffeb5828fb$var$filmsPromiseElq","$467f7dffeb5828fb$var$btnWatched","$467f7dffeb5828fb$var$btnQueue","$467f7dffeb5828fb$var$btnClear","$467f7dffeb5828fb$var$emptyTurn","$467f7dffeb5828fb$var$showWatched","then","result","$467f7dffeb5828fb$var$trendsFilms","data","results","films","typeOfstorage","console","log","innerHTML","markupItems","map","film","JSON","parse","localStorage","getItem","style","display","includes","id","poster_path","original_title","title","genre_ids","item","$aFV0K","getNumberFilms","release_date","slice","vote_average","join","insertAdjacentHTML","filmsChecks","querySelectorAll","onClickLib","event","closeBtnEl","backdropEl","modalHomeEl","classList","add","addEventListener","$blxeU","onCloseModal","onClickBackdrop","filmsPromiseEl","checkedItem","Number","currentTarget","allFilms","searchFilmsFunction","forEach","disabled","ev","remove","e","removeItem"],"version":3,"file":"library.684da4ac.js.map"}