{"mappings":"gfACA,IAAAA,EAAAC,EAAA,S,0BAOMC,G,wBAASC,SAASC,cAAc,oBAEhCC,EAAc,IAAI,EAAAL,EAAAM,aAElBC,EAAkBF,EAAYG,mBAC9BC,EAAkBJ,EAAYG,mBAI9BE,EAAaP,SAASC,cAAc,YACpCO,EAAWR,SAASC,cAAc,UAClCQ,EAAWT,SAASC,cAAc,UAClCS,EAAYV,SAASC,cAAc,cA4BzC,SAASU,IACPP,EAAgBQ,MAAK,SAAAC,GAEnBC,EADcD,EAAOE,KAAKC,QACP,cAUvB,SAASF,EAAYG,EAAOC,GAC1BC,QAAQC,IAAIH,GACVlB,EAAOsB,UAAY,GACnB,IAAMC,EAAcL,EACfM,KAAI,SAAAC,GACD,OAAmE,OAA/DC,KAAKC,MAAMC,aAAaC,QAAQ,SAAuBC,OAAdX,MACzCnB,EAAOsB,UAAY,QACnBX,EAAUoB,MAAMC,QAAU,UAGrBN,KAAKC,MAAMC,aAAaC,QAAQ,SAAuBC,OAAdX,KAAkBc,SAASR,EAAKS,KAC9EvB,EAAUoB,MAAMC,QAAU,OACnB,oDAE2DF,OADjCL,EAAKS,GAAG,wFACkDJ,OAAzBL,EAAKU,YAAY,UAAmCL,OAA3BL,EAAKW,eAAe,SAClFN,OADyFL,EAAKS,GAAG,mDAGxHJ,OAFuBL,EAAKY,MAAM,4EAMCP,OAJnCL,EAAKa,UAAUd,KAAI,SAAAe,GAEnB,OADAA,GAAO,EAAAC,EAAAC,gBAAeF,GACf,IAAST,OAALS,MACV,6DAK0BT,OAJQL,EAAKiB,aAAaC,MACrD,EACA,GACA,4DAC6Cb,OAAlBL,EAAKmB,aAAa,sEAflD,KAoBZC,KAAK,IACR7C,EAAO8C,mBAAmB,YAAavB,GACvC,IAAMwB,EAAc9C,SAAS+C,iBAAiB,eAExCC,EAAa,SAAAC,GACjB,IAAMC,EAAalD,SAASC,cAAc,qBAEpCkD,EAAanD,SAASC,cAAc,aACpCmD,EAAcpD,SAASC,cAAc,cAE3CkD,EAAWE,UAAUC,IAAI,WACzBF,EAAYC,UAAUC,IAAI,WAE1BJ,EAAWK,iBAAiB,QAASC,EAAAC,cACrCN,EAAWI,iBAAiB,QAASC,EAAAE,iBAErC,IACMC,GADc,IAAI,EAAA9D,EAAAM,cACWE,mBAE7BuD,EAAcC,OAAOZ,EAAMa,cAAc7B,IAE/C0B,EAAe/C,MAAK,SAAAG,GAClBI,QAAQC,IAAIL,GACZ,IAAMgD,EAAWhD,EAAKA,KAAKC,SAC3B,EAAAwC,EAAAQ,qBAAoBD,EAAUH,OAIlCd,EAAYmB,SAAQ,SAAAzC,G,OAAQA,EAAK+B,iBAAiB,QAASP,MAjG7DzC,EAAW2D,UAAW,EACtBvD,IAEAJ,EAAWgD,iBAAiB,SAAS,SAAAY,GACnChD,QAAQC,IAAI,OACZZ,EAAS0D,UAAW,EACpB3D,EAAW2D,UAAW,EACtB1D,EAAS6C,UAAUC,IAAI,UACvB/C,EAAW8C,UAAUe,OAAO,UAC5BzD,OAEFH,EAAS+C,iBAAiB,SAAS,SAAAY,GACjC5D,EAAW2D,UAAW,EACtB1D,EAAS0D,UAAW,EACpB3D,EAAW8C,UAAUC,IAAI,UACzB9C,EAAS6C,UAAUe,OAAO,UAkB1B9D,EAAgBM,MAAK,SAAAC,GAEnBC,EADcD,EAAOE,KAAKC,QACP,eAjBvBP,EAAS8C,iBAAiB,SAAS,SAAAc,GACjC1C,aAAa2C,WAAW,iBACxB3C,aAAa2C,WAAW,eAExBvE,EAAOsB,UAAY,GACnBX,EAAUoB,MAAMC,QAAU,W","sources":["src/js/header-lib.js"],"sourcesContent":["// FOR LIBRARY\nimport { TheMovieApi } from './themovie-api';\nimport { getNumberFilms } from \"./gallery\";\nimport { searchFilmsFunction } from \"./modal-home\";\nimport { onCloseModal } from \"./modal-home\";\nimport { onClickBackdrop } from \"./modal-home\";\n\n\nconst listEl = document.querySelector('.film__list-lib');\n\nconst theMovieApi = new TheMovieApi();\n\nconst filmsPromiseElw = theMovieApi.fetchTrendsFilms();\nconst filmsPromiseElq = theMovieApi.fetchTrendsFilms();\n\n\n\nconst btnWatched = document.querySelector('#watched');\nconst btnQueue = document.querySelector('#queue');\nconst btnClear = document.querySelector('#clear');\nconst emptyTurn = document.querySelector('.empty__bg');\n\nbtnWatched.disabled = true;\nshowWatched();\n\nbtnWatched.addEventListener('click', ev => {\n  console.log('hhh');\n  btnQueue.disabled = false;\n  btnWatched.disabled = true;\n  btnQueue.classList.add('active');\n  btnWatched.classList.remove('active');\n  showWatched();\n});\nbtnQueue.addEventListener('click', ev => {\n  btnWatched.disabled = false;\n  btnQueue.disabled = true;\n  btnWatched.classList.add('active');\n  btnQueue.classList.remove('active');\n  showQueue();\n});\nbtnClear.addEventListener('click', e => {\n  localStorage.removeItem('local-watched');\n  localStorage.removeItem('local-queue');\n\n  listEl.innerHTML = '';\n  emptyTurn.style.display = 'block';\n});\n\nfunction showWatched() {\n  filmsPromiseElw.then(result => {\n    const films = result.data.results;\n    trendsFilms(films, 'watched');\n  });\n}\nfunction showQueue() {\n  filmsPromiseElq.then(result => {\n    const films = result.data.results;\n    trendsFilms(films, 'queue');\n  });\n}\n\nfunction trendsFilms(films, typeOfstorage) {\n  console.log(films);\n    listEl.innerHTML = '';\n    const markupItems = films\n        .map(film => {\n            if (JSON.parse(localStorage.getItem(`local-${typeOfstorage}`)) === null) {\n                listEl.innerHTML = '';\n                emptyTurn.style.display = 'block'\n                return;\n            }\n            else if (JSON.parse(localStorage.getItem(`local-${typeOfstorage}`)).includes(film.id)) {\n                emptyTurn.style.display = 'none'\n                return `\n                    <li class=\"film__item\" id=\"${film.id}\">\n                    <img class=\"film__img\" src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\" alt=${film.original_title} id=\"${film.id}\">\n                    <h3 class=\"film__name\">${film.title}</h3>\n                    <p class=\"film__genre\">\n                    ${film.genre_ids.map(item => {\n                      item = getNumberFilms(item);\n                      return ` ${item}`;\n                    })}\n                    <span class=\"film__date-release\">| ${film.release_date.slice(\n                      0,\n                      4\n                    )}</span>\n                    <span class=\"film__rating\">${film.vote_average}</span>\n                    </p>\n                    </li>`;\n      }\n    })\n    .join('');\n  listEl.insertAdjacentHTML('beforeend', markupItems);\n  const filmsChecks = document.querySelectorAll('.film__item')\n\n  const onClickLib = event => {\n    const closeBtnEl = document.querySelector('.modal-close-icon');\n\n    const backdropEl = document.querySelector('.backdrop');\n    const modalHomeEl = document.querySelector('.modal-box');\n    \n    backdropEl.classList.add('is-open');\n    modalHomeEl.classList.add('is-open');\n\n    closeBtnEl.addEventListener('click', onCloseModal);\n    backdropEl.addEventListener('click', onClickBackdrop);\n\n    const theMovieApi = new TheMovieApi();\n    const filmsPromiseEl = theMovieApi.fetchTrendsFilms();\n\n    const checkedItem = Number(event.currentTarget.id);\n\n    filmsPromiseEl.then(data => {\n      console.log(data);\n      const allFilms = data.data.results;\n      searchFilmsFunction(allFilms, checkedItem)\n    })\n  }\n\n  filmsChecks.forEach(film => film.addEventListener('click', onClickLib))\n}\n"],"names":["$8wLUa","parcelRequire","$8b4fc83c766df606$var$listEl","document","querySelector","$8b4fc83c766df606$var$theMovieApi","TheMovieApi","$8b4fc83c766df606$var$filmsPromiseElw","fetchTrendsFilms","$8b4fc83c766df606$var$filmsPromiseElq","$8b4fc83c766df606$var$btnWatched","$8b4fc83c766df606$var$btnQueue","$8b4fc83c766df606$var$btnClear","$8b4fc83c766df606$var$emptyTurn","$8b4fc83c766df606$var$showWatched","then","result","$8b4fc83c766df606$var$trendsFilms","data","results","films","typeOfstorage","console","log","innerHTML","markupItems","map","film","JSON","parse","localStorage","getItem","concat","style","display","includes","id","poster_path","original_title","title","genre_ids","item","$8S4BJ","getNumberFilms","release_date","slice","vote_average","join","insertAdjacentHTML","filmsChecks","querySelectorAll","onClickLib","event","closeBtnEl","backdropEl","modalHomeEl","classList","add","addEventListener","$4z2ok","onCloseModal","onClickBackdrop","filmsPromiseEl","checkedItem","Number","currentTarget","allFilms","searchFilmsFunction","forEach","disabled","ev","remove","e","removeItem"],"version":3,"file":"library.4fcaf130.js.map"}